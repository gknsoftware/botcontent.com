tinymce.PluginManager.add('botcontent', function(editor) {
    var state;

    editor.on('init', function() {
        tinymce.activeEditor.theme.panel.find('toolbar:last').hide();
    })

    /* Actions to do on button click */
    function my_action() {
        state = !state; /* Switching state */
        editor.fire('ttb', {state: state});

        if (state){
            //alert(state); /* Do your true-stuff here */
           tinymce.activeEditor.theme.panel.find('toolbar:last').show();
        }
        else {
            //alert(state); /* Do your false-stuff here */
            tinymce.activeEditor.theme.panel.find('toolbar:last').hide();
        }
    }

    function toggleState_MyButton() {
        var self = this;
        editor.on('ttb', function(e) {
            self.active(e.state);
        });
    }

    /* Adding the button & command */
    editor.addCommand('cmd_ttb', my_action);

    editor.addButton('ttb', {
        image: 'third/assets/js/tinymce/skins/lightgray/img/toggle.png',
        title: 'Araç çubuğunu göster/gizle',
        cmd: 'cmd_ttb',
        onPostRender: toggleState_MyButton
    });
});